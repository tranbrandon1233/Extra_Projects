<!DOCTYPE html>
<html>

<head>
    <title>Voice Command App</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .listening {
            background: #e8f5e9
        }
    </style>
</head>

<body>
    <button id="startButton">Start Listening</button>
    <div id="output"></div>
    <script>
        $(document).ready(function(){
            const outputDiv=$("#output"),startButton=$("#startButton");
            const jokes=["Why don't scientists trust atoms? Because they make up everything!","What do you call a fish with no eyes? Fsh!"];
            let isListening=false;
            const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;
            if(!SpeechRecognition){
                outputDiv.html("<p>Speech recognition not supported.</p>");
                startButton.prop('disabled',true);
                return;
            }
            const recognition=new SpeechRecognition();
            recognition.continuous=false;
            recognition.lang='en-US';
            recognition.onstart=function(){
                isListening=true;
                outputDiv.addClass('listening');
                startButton.prop('disabled',true);
                outputDiv.html("<p>Listening...</p>");
            };
            recognition.onresult=function(event){
                if(event.results.length>0){
                    handleCommand(event.results[0][0].transcript.toLowerCase());
                }
            };
            recognition.onerror=function(){
                isListening=false;
                outputDiv.removeClass('listening');
                startButton.prop('disabled',false);
                outputDiv.html("<p>Error: Try again</p>");
            };
            recognition.onend=function(){
                isListening=false;
                outputDiv.removeClass('listening');
                startButton.prop('disabled',false);
            };
            startButton.click(function(){
                if(!isListening)try{recognition.start()}catch{outputDiv.html("<p>Error starting</p>")}
            });
            function handleCommand(command){
                if(command.includes("time")){
                    outputDiv.html(`<p>Time: ${new Date().toLocaleTimeString()}</p>`);
                }else if(command.includes("joke")){
                    outputDiv.html(`<p>${jokes[Math.floor(Math.random()*jokes.length)]}</p>`);
                }else if(command.includes("weather")){
                    outputDiv.html("<p>Weather: Sunny, 72Â°F</p>");
                }else{
                    outputDiv.html("<p>Command not recognized</p>");
                }
            }
        });
    </script>
</body>
</html>